{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swagw\\\\bootcamp\\\\TutorConnect\\\\bootstrap-app\\\\client\\\\src\\\\components\\\\login.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { Form, FormGroup, FormControl, Button, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginForm({\n  setIsAuthenticated,\n  setRole,\n  setUsername\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [serverError, setServerError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'Invalid email format';\n    }\n    if (!formData.password.trim()) {\n      newErrors.password = 'Password is required';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setErrors({\n      ...errors,\n      [e.target.name]: ''\n    }); // Clear error when typing\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    setLoading(true);\n    setServerError('');\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('role', data.role);\n        localStorage.setItem('username', data.name);\n        setIsAuthenticated(true);\n        console.log('login successful:', data);\n        setRole(data.role);\n        setUsername(data.name);\n        navigate('/');\n      } else {\n        setServerError(data.message || 'Login failed. Please try again.');\n      }\n    } catch (error) {\n      setServerError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const signupRedirect = () => {\n    navigate('/signup');\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit,\n    className: \"p-4 shadow-lg rounded bg-white\",\n    style: {\n      maxWidth: \"400px\",\n      margin: \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"Welcome to TutorConnect!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), serverError && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: serverError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      controlId: \"email\",\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        value: formData.email,\n        onChange: handleChange,\n        isInvalid: !!errors.email,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n        type: \"invalid\",\n        children: errors.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      controlId: \"password\",\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Enter your password\",\n        value: formData.password,\n        onChange: handleChange,\n        isInvalid: !!errors.password,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n        type: \"invalid\",\n        children: errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      variant: \"primary\",\n      className: \"w-100\",\n      disabled: loading,\n      children: loading ? 'Logging in...' : 'Login'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center mt-3\",\n      children: [\"Don't have an account?\", ' ', /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"link\",\n        onClick: signupRedirect,\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginForm, \"gF+p/v3rhVs5ZMTRPFH3BD5iogs=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","Form","FormGroup","FormControl","Button","Alert","useNavigate","jsxDEV","_jsxDEV","LoginForm","setIsAuthenticated","setRole","setUsername","_s","formData","setFormData","email","password","errors","setErrors","serverError","setServerError","loading","setLoading","navigate","validateForm","newErrors","trim","test","Object","keys","length","handleChange","e","target","name","value","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","role","console","log","message","error","signupRedirect","onSubmit","className","style","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","controlId","Label","type","placeholder","onChange","isInvalid","required","Control","Feedback","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/swagw/bootcamp/TutorConnect/bootstrap-app/client/src/components/login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { Form, FormGroup, FormControl, Button, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\n\nfunction LoginForm({ setIsAuthenticated, setRole, setUsername }) {\n  const [formData, setFormData] = useState({ email: '', password: '' });\n  const [errors, setErrors] = useState({});\n  const [serverError, setServerError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'Invalid email format';\n    }\n\n    if (!formData.password.trim()) {\n      newErrors.password = 'Password is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n    setErrors({ ...errors, [e.target.name]: '' }); // Clear error when typing\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n\n    setLoading(true);\n    setServerError('');\n\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('role', data.role);\n        localStorage.setItem('username', data.name);\n\n        setIsAuthenticated(true);\n\n\n        console.log('login successful:', data);\n\n        setRole(data.role);\n        setUsername(data.name);\n        \n        navigate('/');\n      } else {\n        setServerError(data.message || 'Login failed. Please try again.');\n      }\n    } catch (error) {\n      setServerError('Network error. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const signupRedirect = () => {\n    navigate('/signup');\n  };\n\n  return (\n    <Form onSubmit={handleSubmit} className=\"p-4 shadow-lg rounded bg-white\" style={{ maxWidth: \"400px\", margin: \"auto\" }}>\n      <h2 className=\"text-center mb-4\">Welcome to TutorConnect!</h2>\n      <h2 className=\"text-center mb-4\">Login</h2>\n      \n\n      {serverError && <Alert variant=\"danger\">{serverError}</Alert>}\n\n      {/* Email Field */}\n      <FormGroup controlId=\"email\" className=\"mb-3\">\n        <Form.Label>Email</Form.Label>\n        <FormControl\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Enter your email\"\n          value={formData.email}\n          onChange={handleChange}\n          isInvalid={!!errors.email}\n          required\n        />\n        <Form.Control.Feedback type=\"invalid\">{errors.email}</Form.Control.Feedback>\n      </FormGroup>\n\n      {/* Password Field */}\n      <FormGroup controlId=\"password\" className=\"mb-3\">\n        <Form.Label>Password</Form.Label>\n        <FormControl\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Enter your password\"\n          value={formData.password}\n          onChange={handleChange}\n          isInvalid={!!errors.password}\n          required\n        />\n        <Form.Control.Feedback type=\"invalid\">{errors.password}</Form.Control.Feedback>\n      </FormGroup>\n\n      <Button type=\"submit\" variant=\"primary\" className=\"w-100\" disabled={loading}>\n        {loading ? 'Logging in...' : 'Login'}\n      </Button>\n\n      <p className=\"text-center mt-3\">\n        Don't have an account?{' '}\n        <Button variant=\"link\" onClick={signupRedirect}>\n          Sign up\n        </Button>\n      </p>\n    </Form>\n  );\n}\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}